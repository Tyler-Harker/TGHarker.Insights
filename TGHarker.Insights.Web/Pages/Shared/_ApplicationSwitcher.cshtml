@using TGHarker.Insights.Web.Pages.Dashboard
@model DashboardPageModel

<div class="app-switcher dropdown mx-3">
    <button class="dropdown-toggle d-flex align-items-center" type="button" data-bs-toggle="dropdown" aria-expanded="false">
        <i class="bi bi-globe me-2"></i>
        <span>@Model.Application?.Name</span>
    </button>
    <ul class="dropdown-menu dropdown-menu-start shadow-sm">
        <li><h6 class="dropdown-header">Your Applications</h6></li>
        @foreach (var app in Model.AllApplications)
        {
            var appId = app.Id.StartsWith("app-") ? app.Id[4..] : app.Id;
            var isActive = appId == Model.ApplicationId;
            <li>
                <a class="dropdown-item d-flex flex-column @(isActive ? "active" : "")" href="/dashboard/@appId">
                    <span class="fw-medium">@app.Name</span>
                    <span class="app-domain">@app.Domain</span>
                </a>
            </li>
        }
        <li><hr class="dropdown-divider"></li>
        <li>
            <a class="dropdown-item d-flex align-items-center text-primary" href="/dashboard/new">
                <i class="bi bi-plus-circle me-2"></i>
                Add Application
            </a>
        </li>
    </ul>
</div>
